# R80.20 Addressgroup -> Panorama converter tool

## Notice
This code is delivered without warranty, support, or any guarantee of success. 

## What?
This is a very quick script to convert Checkpoint addresses/address-groups to PAN objects and import into a Panorama.

This supports nested address groups within the checkpoint configuration.

Checkpoint configuration exports from R80 management servers sometimes do not contain the objects that match

## How

### 1. Get the objects

From the r80.20 management server
```bash
$MDS_FWDIR/scripts/web_api_show_package.sh -k <PACKAGE NAME> -d <DOMAIN NAME>
```

When extracted, there will be a named [package]_objects.json

**untested** you may also be able to use the output of show objects:
```bash
mgmt_cli show objects --format json 
```

### 2. Run the code

```bash
python parser.py [path-to-objects-file].json --devicegroup [destination device group]
```

### Optional: Enrich with ranges

It is possible that the UUIDs will still not be properly resolved, leading to an incomplete configuration.

There is a checkpoint command that will present all the address objects as IP ranges instead of UUIDS.

```bash
mgmt_cli show groups show-as-ranges "true" --format json
```

If you obtain this JSON you can add it to the parser to autocreate objects matching these ranges.
Addresses created in this manner will be prefixed RR (Recovered Range)

```bash
python parser.py [path-to-objects-file].json --group_ranges [path-to-objects-ranges].json
```

### Optional 2: Fix nat and security policy
Autogenerated objects are sometimes not correctly migrated. Use the --fix_nat flag, in conjunction with the other flags,
to correct this issue.

```bash
python parser.py [path-to-objects-file].json --group_ranges [path-to-objects-ranges].json --fix_nat 
```
